<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>VUE源码分析笔记</title>
</head>
<body>

<pre>
    Vue.js 的源码利用了 Flow 做了静态类型检查，所以了解 Flow 有助于我们阅读源码。

    <h4>为什么用 Flow ?</h4>

    JavaScript 是动态类型语言，它的灵活性有目共睹，但是过于灵活的副作用是很容易就写出非常隐蔽的隐患代码，
    在编译期甚至看上去都不会报错，但在运行阶段就可能出现各种奇怪的 bug。

    项目越复杂就越需要通过工具的手段来保证项目的维护性和增强代码的可读性。
    Vue.js 在做 2.0 重构的时候，在 ES2015 的基础上，除了 ESLint 保证代码风格之外，
    也引入了 Flow 做静态类型检查。之所以选择 Flow，主要是因为 Babel 和 ESLint 都有对应的 Flow 插件以支持语法，
    可以完全沿用现有的构建配置，非常小成本的改动就可以拥有静态类型检查的能力。

    <h4>Flow 的工作方式</h4>

    通常类型检查分成 2 种方式：

    类型推断：通过变量的使用上下文来推断出变量类型，然后根据这些推断来检查类型。

    类型注释：事先注释好我们期待的类型，Flow 会基于这些注释来判断。

    <h4>Flow 在 Vue.js 源码中的应用</h4>

    有时候我们想引用第三方库，或者自定义一些类型，但 Flow 并不认识，因此检查的时候会报错。
    为了解决这类问题，Flow 提出了一个 <b>libdef</b> 的概念，可以用来识别这些第三方库或者是自定义类型，而 Vue.js 也利用了这一特性。

    在 Vue.js 的主目录下有 .flowconfig 文件， 它是 Flow 的配置文件，感兴趣的同学可以看官方文档。
    这其中的 <b>[libs]</b> 部分用来描述包含指定库定义的目录，默认是名为 flow-typed 的目录。

    这里 [libs] 配置的是 flow，表示指定的库定义都在 flow 文件夹内。

    flow

    ├── compiler.js        # 编译相关
    ├── component.js       # 组件数据结构
    ├── global-api.js      # Global API 结构
    ├── modules.js         # 第三方库定义
    ├── options.js         # 选项相关
    ├── ssr.js             # 服务端渲染相关
    ├── vnode.js           # 虚拟 node 相关







</pre>

</body>
</html>